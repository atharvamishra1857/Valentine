<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Be My Valentine?</title>

    <link rel="icon" type="image/png" href="favicon.png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="pinksection" id="bg-container">
      <div class="curvedCard animate__animated animate__zoomIn">
        <img src="OJXMDX0.jpg" alt="Cute Valentine" class="cute-gif" />

        <div class="questions">
          <h1
            class="first-head animate__animated animate__pulse animate__infinite"
          >
            Will You Be My Valentine? ðŸŒ¹
          </h1>
        </div>

        <div class="button-container">
          <a href="page.html">
            <button class="btn btn-yes">Yess!!</button>
          </a>
          <button class="btn" id="runaway-btn">No!!</button>
        </div>
      </div>
    </div>

    <script>
      // 1. ADD BACKGROUND FLOATING TEXT (Kept same)
      const bgContainer = document.getElementById("bg-container");
      const phrases = [
        "I Love You",
        "Be Mine",
        "Apsara",
        "Forever",
        "Cutie",
        "ðŸ’–",
        "ðŸ¥°",
        "ðŸŒ¹",
        "My Love",
        "Only You",
      ];

      function spawnBackgroundText() {
        const el = document.createElement("div");
        el.classList.add("bg-floater");
        el.innerText = phrases[Math.floor(Math.random() * phrases.length)];
        el.style.left = Math.random() * 90 + "vw";
        el.style.top = Math.random() * 90 + "vh";
        el.style.fontSize = Math.random() * 20 + 20 + "px";
        el.style.transform = `rotate(${Math.random() * 360}deg)`;
        bgContainer.appendChild(el);
      }

      for (let i = 0; i < 15; i++) {
        spawnBackgroundText();
      }

      // 2. FALLING HEARTS (Kept same)
      function createHeart() {
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerText = "ðŸ’—";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = Math.random() * 3 + 3 + "s";
        heart.style.fontSize = Math.random() * 20 + 10 + "px";
        document.body.appendChild(heart);
        setTimeout(() => {
          heart.remove();
        }, 6000);
      }
      setInterval(createHeart, 300);

      // ==========================================
      // 3. SAFE ZONE RUNAWAY LOGIC
      // ==========================================

      const btn = document.getElementById("runaway-btn");

      const moveButton = () => {
        // use standard viewport
        const vw = window.innerWidth;
        const vh = window.innerHeight;

        const btnWidth = btn.offsetWidth;
        const btnHeight = btn.offsetHeight;

        // Use a 15% safety margin total (7.5% on each side)
        // This keeps it well away from address bars and bottom nav
        const xBuffer = vw * 0.075;
        const yBuffer = vh * 0.075;

        // Calculate the safe playable area (85% of screen)
        const safeWidth = vw - xBuffer * 2 - btnWidth;
        const safeHeight = vh - yBuffer * 2 - btnHeight;

        // Generate random position within that safe area
        const randomX = Math.random() * safeWidth;
        const randomY = Math.random() * safeHeight;

        // Add the buffer to center it
        const finalX = xBuffer + randomX;
        const finalY = yBuffer + randomY;

        // Force Fixed Position
        btn.style.position = "fixed";
        btn.style.left = `${finalX}px`;
        btn.style.top = `${finalY}px`;

        // Ensure z-index is high enough
        btn.style.zIndex = "9999";
      };

      // DESKTOP: Run away when mouse gets close
      document.addEventListener("mousemove", (e) => {
        const btnRect = btn.getBoundingClientRect();
        const btnCenterX = btnRect.left + btnRect.width / 2;
        const btnCenterY = btnRect.top + btnRect.height / 2;

        // Calculate distance
        const distance = Math.hypot(
          e.clientX - btnCenterX,
          e.clientY - btnCenterY,
        );

        // If mouse is closer than 100px, move it
        if (distance < 100) {
          moveButton();
        }
      });

      // MOBILE: Run away on Touch START (before click)
      btn.addEventListener("touchstart", (e) => {
        e.preventDefault(); // Prevent actual click
        moveButton();
      });

      // FALLBACK: Run away on Click (for fast tappers)
      btn.addEventListener("click", (e) => {
        e.preventDefault(); // ensure it doesn't trigger anything
        moveButton();
      });
    </script>
  </body>
</html>
